<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For snowball ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;600&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

body{
  font-family: 'Dancing Script', cursive;
  background: linear-gradient(120deg,#fdeff4,#ffe5ec);
  background-size: 200% 200%;
  animation: bg 12s ease infinite;
  color:#333;
  text-align:center;
  overflow-x:hidden;
}
@keyframes bg{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

section {
  min-height: 100vh;
  padding: 24px;

  display: none;              /* üî• IMPORTANT */
  flex-direction: column;
  justify-content: center;
  align-items: center;

  opacity: 0;
  transform: translateX(40px);
  transition: opacity .6s ease, transform .6s ease;
}

section.active {
  display: flex;              /* üî• ONLY ACTIVE ONE SHOWS */
  opacity: 1;
  transform: translateX(0);
}


button{
  padding:12px 24px;
  margin-top:14px;
  border:none;
  border-radius:24px;
  background:#ff8fab;
  color:white;
  font-size:18px;
  cursor:pointer;
  transition:.2s;
}
button:hover{ transform:translateY(-1px); }

.memory{
  border:2px dashed #ffb3c6;
  padding:20px;
  border-radius:16px;
}
.memory img,
.memory video{
  max-width:90%;
  border-radius:14px;
  margin-top:12px;
}
.memory p{ margin-top:10px; font-size:18px; }

.lock{
  font-size:40px;
  cursor:pointer;
  user-select:none;
  transition:.2s;
}
.lock:active{ transform:scale(.9); }

/* Envelope */
#envelope{
  width:240px;height:160px;
  background:#ffb3c6;
  border-radius:14px;
  position:relative;
  perspective:900px;
  transition:.6s;
}
#flap{
  position:absolute;top:0;
  width:100%;height:80px;
  background:#ff8fab;
  border-radius:14px 14px 0 0;
  transform-origin:top;
  transition:1.2s cubic-bezier(.25,.8,.25,1);
}
#letter{
  position:absolute;
  bottom:12px;left:12px;right:12px;
  height:110px;
  background:#fff;
  border-radius:8px;
  display:flex;
  align-items:center;
  justify-content:center;
  transform:translateY(40px);
  opacity:0;
  transition:1s;
}
.open{ transform:scale(1.05); }
.open #flap{ transform:rotateX(-160deg); }
.open #letter{ transform:translateY(-30px); opacity:1; }

/* Hearts */
#alignArea{ position:relative;height:200px;width:100%; }
.align-heart{ position:absolute;font-size:40px; }
#target{ top:80px;left:50%;transform:translateX(-50%); }
#draggable{ top:20px;left:20px;cursor:grab; }

/* Find me */
.dot{
  width:20px;height:20px;
  background:#ffb3c6;
  border-radius:50%;
  position:absolute;
}

/* Music */
#musicBtn{
  position:fixed;top:16px;right:16px;
  width:44px;height:44px;
  border-radius:50%;
  background:#ff8fab;
  color:white;
  font-size:18px;
  z-index:50;
}

/* Curtains */
#curtains{ position:fixed;inset:0;display:none;z-index:10; }
.curtain{ position:absolute;width:50%;height:100%;background:#2b2b2b; }
#leftCurtain{ left:-50%; }
#rightCurtain{ right:-50%; }
.closeLeft{ animation:cl 1.2s forwards; }
.closeRight{ animation:cr 1.2s forwards; }
@keyframes cl{ to{left:0} }
@keyframes cr{ to{right:0} }

#finalText{
  position:fixed;inset:0;
  display:none;
  justify-content:center;
  align-items:center;
  color:white;
  font-size:28px;
  z-index:20;
  animation:fadeIn 1.2s forwards;
}
@keyframes fadeIn{ from{opacity:0} to{opacity:1} }
</style>
</head>

<body>

<button id="musicBtn">üéµ</button>

<script>
const PASSWORD="KUCHIPUCHIIIII";
if(prompt("What is your nickname on Instagram? üíó")!==PASSWORD){
  document.body.innerHTML="<h2 style='margin-top:40vh'>Hmm‚Ä¶ that‚Äôs not it.</h2>";
  throw new Error("Denied");
}
</script>

<audio id="bgm" loop>
  <source src="music.mp3">
</audio>

<section class="active">
  <div id="envelope">
    <div id="flap"></div>
    <div id="letter">for you üíå</div>
  </div>
  <button onclick="openEnvelope()">Open</button>
</section>

<section>
  <p>hiiiii meri cutu</p>
  <button onclick="next()">Next</button>
</section>

<section>
  <button onclick="mood('That makes me smile.')">Happy</button>
  <button onclick="mood('Dabochlu??')">Tired</button>
  <button onclick="mood('I miss you too.')">Missing you</button>
  <p id="reply"></p>
</section>

<section class="memory">
  <p>There‚Äôs a memory here.</p>
  <div class="lock" onclick="unlock(this,'p1.jpg','kitti sundar ho aap')">üîí</div>
</section>

<section>
  <div id="hugBox">
    <button onclick="hug()">Hug me</button>
    <p id="hugText"></p>
  </div>
</section>

<section class="memory">
  <p>Another memory.</p>
  <div class="lock" onclick="unlock(this,'v1.mp4','I still remember this.',true)">üîí</div>
</section>

<section>
  <p>Bring us together.</p>
  <div id="alignArea">
    <div id="target" class="align-heart">‚ù§Ô∏è</div>
    <div id="draggable" class="align-heart">‚ù§Ô∏è</div>
  </div>
  <p id="alignText"></p>
</section>

<section id="findme">
  <p>I‚Äôm somewhere here.</p>
</section>

<section class="memory">
  <p>One last memory.</p>
  <div class="lock" onclick="unlock(this,'p10.jpg','Always you.')">üîí</div>
</section>

<div id="curtains">
  <div id="leftCurtain" class="curtain"></div>
  <div id="rightCurtain" class="curtain"></div>
</div>

<div id="finalText">
  <p>I love you, snowball ü§ç</p>
</div>

<script>
const sections=document.querySelectorAll("section");
const envelope=document.getElementById("envelope");
const bgm=document.getElementById("bgm");
const reply=document.getElementById("reply");
const hugText=document.getElementById("hugText");
const alignText=document.getElementById("alignText");
const findme=document.getElementById("findme");
const curtains=document.getElementById("curtains");
const leftCurtain=document.getElementById("leftCurtain");
const rightCurtain=document.getElementById("rightCurtain");
const finalText=document.getElementById("finalText");
const musicBtn=document.getElementById("musicBtn");

let index=0;
let dragging=false;
let heartDone=false;

function show(i){
  sections.forEach(s=>s.classList.remove("active"));
  sections[i].classList.add("active");
}
function next(){ if(index<sections.length-1) show(++index); }

function openEnvelope(){
  envelope.classList.add("open");
  bgm.play().catch(()=>{});
  setTimeout(()=>{
    if(document.getElementById("envNext")) return;
    const b=document.createElement("button");
    b.id="envNext";b.innerText="Open letter";b.onclick=next;
    envelope.parentElement.appendChild(b);
  },1400);
}

function mood(t){
  reply.innerText=t;
  if(!document.getElementById("mNext")){
    const b=document.createElement("button");
    b.id="mNext";b.innerText="Next";b.onclick=next;
    reply.appendChild(document.createElement("br"));
    reply.appendChild(b);
  }
}

function unlock(el,src,cap,isVideo=false){
  el.dataset.t=(+el.dataset.t||0)+1;
  if(el.dataset.t<3) return;
  el.parentElement.innerHTML = isVideo
    ? `<video src="${src}" controls playsinline></video><p>${cap}</p><button onclick="next()">Next</button>`
    : `<img src="${src}"><p>${cap}</p><button onclick="next()">Next</button>`;
}

function hug(){
  hugBox.classList.add("squeeze");
  hugText.innerText = "This is me holding you.";

  if(!document.getElementById("hugNext")){
    const btn = document.createElement("button");
    btn.id = "hugNext";
    btn.innerText = "Next";
    btn.onclick = next;
    hugText.appendChild(document.createElement("br"));
    hugText.appendChild(btn);
  }
}


const drag=document.getElementById("draggable");
const target=document.getElementById("target");

function checkHeart(){
  if(heartDone) return;
  if(Math.abs(drag.offsetLeft-target.offsetLeft)<30 &&
     Math.abs(drag.offsetTop-target.offsetTop)<30){
    heartDone=true;
    alignText.innerText="We always find our way back.";
    const b=document.createElement("button");
    b.innerText="Next";b.onclick=next;
    alignText.appendChild(document.createElement("br"));
    alignText.appendChild(b);
  }
}

drag.addEventListener("touchmove",e=>{
  const t=e.touches[0];
  drag.style.left=t.clientX-20+"px";
  drag.style.top=t.clientY-20+"px";
  checkHeart();
});
drag.addEventListener("mousedown",()=>dragging=true);
document.addEventListener("mousemove",e=>{
  if(dragging){
    drag.style.left=e.clientX-20+"px";
    drag.style.top=e.clientY-20+"px";
    checkHeart();
  }
});
document.addEventListener("mouseup",()=>dragging=false);

/* Find me */
let taps=0;
for(let i=0;i<10;i++){
  const d=document.createElement("div");
  d.className="dot";
  d.style.left=Math.random()*80+"%";
  d.style.top=Math.random()*60+30+"%";
  d.onclick=()=>{
    taps++; d.style.opacity=0;
    if(taps===4){
      const b=document.createElement("button");
      b.innerText="Next";b.onclick=next;
      findme.appendChild(b);
    }
  };
  findme.appendChild(d);
}

musicBtn.onclick=()=>{ bgm.paused?bgm.play():bgm.pause(); };

function finish(){
  curtains.style.display="block";
  leftCurtain.classList.add("closeLeft");
  rightCurtain.classList.add("closeRight");
  setTimeout(()=>finalText.style.display="flex",1200);
}
</script>

</body>
</html>
